<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3D Carousel with Logo</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar  fixed-top navbar-expand-lg ">
        <div class="container-fluid">
          <a class="navbar-brand ms-4" href="#">SJ developers</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse " id="navbarNavDropdown">
            <ul class="navbar-nav mx-auto ">
              <li class="nav-item me-4">
                <a class="nav-link " aria-current="page" href="#">Our Project</a>
              </li>
              <li class="nav-item me-2">
                <a class="nav-link " href="#">Partnerships</a>
              </li>
              <li class="nav-item ms-2">
                <a class="nav-link " href="#">Contact us</a>
              </li>
              <li class="nav-item  ms-4">
                <a class="nav-link " href="#">About us</a>
              </li>
            </ul>
            <ul class="navbar-nav me-4">
            <li class="nav-item dropdown  border rounded rounded-7 explore text-center ">
                <a class="nav-link dropdown-toggle text-light" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Explore
                </a>
                <ul class="dropdown-menu  text-center" aria-labelledby="navbarDropdownMenuLink">
                  <li><a class="dropdown-item text-light" href="#">Action</a></li>
                  <li><a class="dropdown-item text-light" href="#">Another action</a></li>
                  <li><a class="dropdown-item text-light" href="#">Something </a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <img src="assets\left.svg" alt="" class="fixed-bottom " >
      <img src="assets\right.svg" alt="" class=" right"  >
    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x71A274, 1); // Set background color to white
        document.body.appendChild(renderer.domElement);

        camera.position.z = 4.5;

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 3.5);
        directionalLight.position.set(5, 10, 7.5);
        scene.add(directionalLight);

        const loader = new GLTFLoader();
        let logo;
        loader.load('logo.gltf', (gltf) => {
            logo = gltf.scene;
            logo.position.set(0, 0, 0);
            logo.scale.set(40, 40, 40);
            scene.add(logo);
        }, undefined, (error) => {
            console.error(error);
        });

        const images = [];
        const imageCount = 8; // Number of images in the carousel
        const radius = 2.5; // Radius of the carousel

        for (let i = 0; i < imageCount; i++) {
            const texture = new THREE.TextureLoader().load(`assets/image2.jpg`);
            const material = new THREE.MeshBasicMaterial({ map: texture });
            const geometry = new THREE.PlaneGeometry(1.4, 1.1);
            const mesh = new THREE.Mesh(geometry, material);

            const angle = (i / imageCount) * Math.PI * 2;
            const x = radius * Math.cos(angle);
            const z = radius * Math.sin(angle);
            const y = -0.5*Math.sin(angle); // Tilted axis

            mesh.position.set(x, y, z);
            images.push(mesh);
            scene.add(mesh);
        }

        let scrollFactor = 0;
        
        window.addEventListener('scroll', () => {
            const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
            scrollFactor = window.scrollY / maxScroll;
        });
        
        function adjustImageProperties(image, transitionFactor) {
            // Apply greyscale and adjust opacity smoothly
            const colorFactor = 1 - transitionFactor;
            const opacityFactor = 0.5 + (0.7 * transitionFactor);

            // image.material.color.setRGB(colorFactor, colorFactor, colorFactor);
            image.material.opacity = opacityFactor;
            image.material.transparent = true; // Ensure transparency is enabled
        }

        function animate() {
            requestAnimationFrame(animate);

            const rotationSpeed = scrollFactor ; // Adjust speed as needed

            // Rotate the logo
            if (logo) {
                logo.rotation.y = -(rotationSpeed * Math.PI * 3);
            }

            // Rotate the carousel
            images.forEach((image, index) => {
                const angle = (scrollFactor + index * (1 / imageCount)) * Math.PI * 2;
                const x = radius * Math.cos(angle);
                const z = radius * Math.sin(angle);
                const y = -0.7 * Math.sin(angle); // Tilted axis

                image.position.set(x, y, z);

                  // Calculate visibility based on angle
                  const cameraAngle = Math.atan2(y, z-1);
                const transitionFactor = 1 - Math.abs(cameraAngle / (Math.PI / 2));

                adjustImageProperties(image, transitionFactor);       
              });

            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
